
=== General Info ===

DO NOT UPLOAD THE ROM TO THE PROJECT.
DO NOT ASK HOW TO DOWNLOAD THE ROM.

To record a movie, you need to download DeSmuME first.
http://tasvideos.org/forum/t/8008
Our test run uses 0.9.6.

=Mistakes and possible improvements of test run=

* Magnes can cancel backdash so it should be abused for more boost.
* I picked up a bunch of redundant items, to see what is useful and what is useless.
* Beginning-Monastery - Sliding at the edge just before falling down is slower in most cases, because backdash can keep its effect in midair.
* Monastery - Lacking backdash when entering the level (exiting previous level with sliding seems to disable that)
* Monastery - Secare (Sword) can be obtained at the long corridor which is before the boss room. I think it's faster because Banshee won't interrupt Shanoa.
** <del>However, I think Secare doesn't help Shanoa so much. It shortens the first boss battle a little, but costs a few seconds when obtain/equip it.</del> not really?
* Monastery - Don't do Glyph Union attacks continuously, invulnerability costs some of frames. However, do it when MP is full. Attacking delays MP recovery.
* Monastery - Possibly, Magnes use in Arthroverta's room (the boss room) can be optimized a little more.
* Wygol Village - Less heart supply, because it can be recovered by absorbing Glyphs (+10).
* Ruvas Forest - Saving HPs for Kalidus Channel might save time. Glyph Union could be a time saver, because hearts can be recovered by absorbing Glyphs (+10).
* Kalidus Channel - It's hard to optimize this level tightly. Especially, I was annoyed at Merman's behavior.
* Minera Prison Island - Giant Skeleton battle is so sloppy. Need to think about a better strategy.
* Minera Prison Island - Exiting Giant Skeleton by sliding might be faster.
* Lighthouse - Brachyura can be defeated without Union Macir (use Dominus Hatred instead)
** Brachyura has 450 HP for each stage (HP border: 1350, 900, 450)

=Game mechanisms=

==Methods of Move==

w/o inertia:
* Rapidus+kick (jump 6,1): (6144+16384*8+28672*6)/15 = 20616.5333
w/  inertia:
* (26272+23872+21472+19072+6144+28672*3)/8 = 22856 (jump 2,1)
* (26272+23872+21472+6144+28672*2)/6 = 22517.3333
* (26272+23872+21472+19072+16672+6144+28672*3)/9 = 22168.8889
* (26272+23872+21472+19072+16672+6144+16384+28672*4)/11 = 22234.1818
* (26272+23872+21472+19072+16672+6144+16384*2+28672*5)/13 = 22279.3846

* >,<L,>v: (13888+11488)/2 = 12688

<obsoleted>

I'm not sure how can I move optimal, but I can say about some facts.

* Backdash+jump: (13888+13440+12992+12544+12096+11648+11200+10752+10304+9856+9408+8960)/12=11424
* Backdash+attack: (13888+13440+12992+12544+12096+11648+0)/7=10944 (crouching decreases velocity a little)

Sliding has higher initial velocity than backdash, however:

* Backdash can keep its effect in midair but sliding cannot. Therefore, it shouldn't be used at the edge just before falling down, if you need horizontal speed.
* If sliding is used to exit a level, you cannot do backdash just when you entered to a level. That'll cost a few of frames.

Other findings:

* Decrement of backdash speed stops when Shanoa touches the edge a step only 1 frame. Possibly slightly increase average speed. http://img.f.hatena.ne.jp/images/fotolife/G/GOCHA/20090920/20090920200217.png

</obsoleted>

=Memory Addresses=

See memory watch file (*.wch) for major memory addresses.

* 021007A2-021007C1 : Treasure chests

Useful cheat codes can be found here and there:

* http://tasvideos.org/forum/p/199347#199347
* http://nintendods.cheats.de/cheat_ausgabe.php?id=305087

* 0210030C: EXP
* 020FFD38-020FFD41: Raw STR,CON,INT,MND,LCK (can be glitched by transform + level up)
* 020FFD48-020FFD55: Raw ACK,DEF,STR,CON,INT,MND,LCK
* 020FFD5C-020FFD69: Actual values: Raw + Effects (ex. equips, transform glyph)
* 020FFD88-020FFD91: Raw STR,CON,INT,MND,LCK shadows
* 020FFE04-020FFE11: Increase rate of each attributes
* 0210031C-02100329: Attribute points (a ring increases it by 0x1800 or 6144)

A: Strength of glyph
S: STR or INT, it depends on the type of the glyph you use
P: Attribute points (when a glyph has two or more attributes, calc the average)
[ ]: math.floor
ATK=[ ([A/2]+[S/12]+[A*S/16]) * (1+P/32768) ]

==Treasure chests==

* 007C - Heart Repair
* 007D - Magical Ticket
* 00C1 - Sage
* 013B - Protect Ring (750G)
* 0154 - Blow Ring
* 0155 - Wind Ring

Monastery:
* 021007A8 - First treasure chest
* 021007AA - Last treasure chest

Minera Prison Island:
* 021007AA - First treasure chest
* 021007A2 - Second treasure chest
* 021007A6 - Fourth treasure chest (optional)
* 021007A8 - Sixth treasure chest (optional?; bottom path costs time a little?)
* 021007AE - Fifth treasure chest (optional; Bone Archer)
* 021007AC - Third treasure chest (optional; Axe Armor stands on the way)

Misty Forest Road:
* 021007A2 - First treasure chest
* 021007A4 - Second treasure chest

Skeleton Cave:
* 021007A2

Somnus Reaf:
* 021007A2 - First treasure chest (best?)
* 021007A4 - Second treasure chest
* 021007A6 - Third treasure chest
* 021007A8 - Left treasure chest before Monica
* 021007AA - Right treasure chest before Monica
* 021007AC - Treasure chest before the bottom warp
* 021007B0 - Treasure chest at the right bottom of the level

==Miscellaneous==

* Enemy's invincibility count for left hand and that of right hand are handled independently. If you attacked an enemy with left hand, you should do the next attack with right hand, even though you cancel the first attack just before the second attack by backdash. (for details, watch the actual memory values)
* All 3 DS Castlevania games uses the same RNG routines. We can know how many times the RNG was called on certain frame via Lua script. This would be especially useful for treasure chest manipulation.
** RNG information was learned from here http://www.gamespot.com/ds/action/castlevaniaorderofecclesia/show_msgs.php?topic_id=m-1-46105317&pid=945837&page=12
** RNG gets reset according to a frame counter when loading a save file. It's very important for Portrait of Ruin, but not much for Order of Ecclesia.





=Scraps=

[quote="Catastrophe"]I'm going to need 6 Magical Tickets (warp) this run. The occasions are:
Skeleton Cave
Minera Prison, when I backtrack to grab Aeon
Oblivion Ridge
Ecclesia, when Barlowe sends me to kill Albus
Mystery Manor, right after I kill Albus
Ecclesia, right after I kill Barlowe

I get one for free in Kalidus. Then I need to manipulate 5 more or buy them.[/quote]
